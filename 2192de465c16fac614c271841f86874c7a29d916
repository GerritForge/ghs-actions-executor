{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "02f3ab76_48ee184d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "```suggestion\nWhen BitmapGenerationAction runs, it creates these files:\n```",
      "range": {
        "startLine": 9,
        "startChar": 33,
        "endLine": 9,
        "endChar": 43
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b308312a_8735d74d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "I understand why we might want to do the best thing and move only the second-newest to the preserved directory, however this unnecessarily complicates the code imho.\n\nSince jgit already has a mechanism to restore packfiles from the preserved directory if needed ([here](https://eclipse.gerrithub.io/c/eclipse-jgit/jgit/+/122288)).\n\nCouldn\u0027t we just move everything to the preserved directory and let the natural `prune-preserved` cycle do the removal for us, when appropriate?",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 21,
        "endChar": 74
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7411810_a92f4063",
        "filename": "src/main/java/com/gerritforge/ghs/actions/BitmapGenerationLog.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "```suggestion\n  static FileLock acquireLogLock(String repositoryPath) throws IOException {\n```",
      "range": {
        "startLine": 85,
        "startChar": 18,
        "endLine": 85,
        "endChar": 33
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba1981e1_ce4dfbcf",
        "filename": "src/main/java/com/gerritforge/ghs/actions/BitmapGenerationLog.java",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "This `FileChannel` is never closed. The `FileLock` is `AutoCloseable`, but the _channel_ itself never gets closed explicitly, so this could be a resource leak.\n\nI think we either need to return the `FileChannel` so it can be used in a try-with-resources, or explicitly close it after the `lock.acquiredBy()` call.\n\nWDYT?",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 99
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4a839be_69f1cc22",
        "filename": "src/main/java/com/gerritforge/ghs/actions/BitmapGenerationLog.java",
        "patchSetId": 1
      },
      "lineNbr": 103,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "Can the `.ghs-packs.log` be empty?\nI think we should code defensively to handle that case.",
      "range": {
        "startLine": 103,
        "startChar": 0,
        "endLine": 103,
        "endChar": 37
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba9aa66e_7ad707fe",
        "filename": "src/main/java/com/gerritforge/ghs/actions/BitmapGenerationLog.java",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "The implementation of `rangeClosed` states that the range is **inclusive**.\n```public static LongStream rangeClosed(long startInclusive, final long endInclusive) {```\n\nSince this is a zero-based range, should we not stop at `(fileSize / ID_LENGTH) - 1`",
      "range": {
        "startLine": 107,
        "startChar": 0,
        "endLine": 107,
        "endChar": 57
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f64335ea_4a539233",
        "filename": "src/main/java/com/gerritforge/ghs/actions/PruneOutdatedBitmapsAction.java",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "nit: `read` might throw `UncheckedIOException` as well as `IOException`, however here we don\u0027t handle `UncheckedIOException`. Should we catch that as well, so that we can consistently log at L54.",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 47,
        "endChar": 99
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "72d24da3_d1ecdcef",
        "filename": "src/main/java/com/gerritforge/ghs/actions/PruneOutdatedBitmapsAction.java",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "```suggestion\n      try (FileLock lock \u003d BitmapGenerationLog.acquireLogLock(repositoryPath);\n```",
      "range": {
        "startLine": 72,
        "startChar": 47,
        "endLine": 72,
        "endChar": 62
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a441280_23dd0c49",
        "filename": "src/main/java/com/gerritforge/ghs/actions/PruneOutdatedBitmapsAction.java",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "This gives a warning, since we are ignoring its return value.\nCould we meke `writePackId` return `int` instead?",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 30
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1c2ffaf_b074a423",
        "filename": "src/main/java/com/gerritforge/ghs/actions/PruneOutdatedBitmapsAction.java",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-08-11T20:25:12Z",
      "side": 1,
      "message": "```suggestion\n  private record PruneInfo(\n```",
      "range": {
        "startLine": 172,
        "startChar": 0,
        "endLine": 172,
        "endChar": 34
      },
      "revId": "2192de465c16fac614c271841f86874c7a29d916",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}